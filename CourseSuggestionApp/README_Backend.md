
# Апликација за Предлози на Курсеви

## Подесување
SDK: 21 
JDK: 17

### 1. **Подесување на PostgreSQL база податоци**
За да работите со локална база податоци додека не се подигне хостирана, најбрзиот начин за поставување на базата е преку Docker:

```bash
docker run --name course-suggestion-db -e POSTGRES_USER=postgres -e POSTGRES_PASSWORD=2453 -e POSTGRES_DB=Course-Suggestion-App -p 5432:5432 -d postgres
```

Ова ќе стартира PostgreSQL контејнер со база податоци наречена `Course-Suggestion-App`. Базата е поставена да работи локално на портата `5432`.

### 2. **Поврзување со базата податоци во IntelliJ**
- Отворете IntelliJ и одете на **Database** табот.
- Изберете **Data Source**, изберете **PostgreSQL**, и внесете ги следниве податоци:
  - **Корисничко име**: `postgres`
  - **Лозинка**: `2453`
  - **Хост**: `localhost`
  - **Порта**: `5432`
  - **База податоци**: `Course-Suggestion-App`

Така можете да гледате табели, податоци и да извршувате упити според потребите.

---

## Тестирање на Аутентикација преку Postman

Пошто немаме фронтенд за сега, можете да тестирате **регистрација на корисник** и **логирање** преку Postman.

### 1. **Регистрирање на корисник**
- **Endpoint**: `POST http://localhost:9090/api/v1/auth/register`
- **Header**:
  - `Content-Type: application/json`
- **Body** (raw JSON):
  ```json
  {
    "email": "testuser1@gmail.com",
    "first_name": "Nikola",
    "last_name": "Nikolovski",
    "password": "testpassword"
  }
  ```

Овој ендпоинт создава нов корисник. По успешна регистрација, ќе се врати JWT токен, кој понатаму ќе се користи за аутентикација.

### 2. **Логирање на корисник**
- **Endpoint**: `POST http://localhost:9090/api/v1/auth/authenticate`
- **Header**:
  - `Content-Type: application/json`
- **Body** (raw JSON):
  ```json
  {
    "email": "testuser1@example.com",
    "password": "testpassword"
  }
  ```

Овој ендпоинт овозможува корисниците да се логираат. По успешна аутентикација, серверот ќе врати JWT токен, кој фронтенд тимот ќе го чува и ќе го користи за пристап до заштитени рути.

### 3. **Пристап до заштитена рута**
- **Endpoint**: `GET http://localhost:9090/api/v1/demo-controller`
- **Header**:
  - `Authorization: Bearer <your_jwt_token_here>`
  
Ова е привремен ендпоинт за тестирање на аутентикација. Ако токенот е валиден, ќе добиете порака `"Hello World"`. Ако токенот е невалиден или недостасува, ќе добиете **403 Forbidden** одговор.

---

## Безбедносна Конфигурација

- Ендпоинтите под `/api/v1/auth/**` (регистрација и логирање) се достапни без аутентикација.
- Сите други рути се заштитени и бараат валиден JWT токен испратен во **Authorization** хедерот (во форматот `Bearer <token>`).

---

## Интеграција со Фронтенд

Откако фронтендот ќе биде подготвен, тој ќе се погрижи за чување на JWT токенот (на пример, во колачиња или локална меморија). Секој пат кога корисникот ќе побара заштитена страница, фронтендот ќе го испрати токенот во **Authorization** хедерот за серверот да го потврди.
